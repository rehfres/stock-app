{"version":3,"sources":["draw.js","timeToSeconds.js","Socket.js","Stock.js","firebase.js","App.js","serviceWorker.js","index.js"],"names":["canvasWidth","canvasHeight","coefTimeToCanvas","secondsInaDay","drawChart","canvas","context","prices","previousClose","width","height","initVars","beginPath","moveTo","lineTo","lineWidth","strokeStyle","stroke","drawPreviousCloseLine","console","log","_arr","_i","length","sign","lastData","index","time","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","_ref2","value","timeInSeconds","price","err","return","fillChart","save","clip","fillStyle","fillRect","restore","timeToSeconds","toString","includes","Date","toISOString","split","slice","coef","result","socket","io","on","Stock","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","pricesModifiedForCanvas","counter","previousCloseModifiedForCanvas","priceMin","priceMax","coefPricesToCanvas","webSocketsMessagesCounter","React","createRef","getDataAndMakeChart","bind","assertThisInitialized","makeChart","draw","setPreviousClose","modifyEverythingForCanvas","getPricesMaxMinAndCanvasCoef","fetch","symbol","then","response","json","chartData","chartDataDay","initResizeCanvas","chartDataMonth","dateToday","now","replace","chardDataDayReturnsYesterday","date","objToGetPreviousCloseFrom","close","setState","objectSpread","simplePrices","minuteData","marketClose","push","minute","Math","max","apply","concat","min","_this2","positive","negative","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","priceObj","modifyTimeForCanvas","current","getContext","clearRect","_this3","message","JSON","parse","mergeSocketDataToPrices","lastLocalPriceTime","lastLocalPrice","messageTime","timeEnd","pricesNew","stringify","lastSign","_arr2","_i2","scale","window","devicePixelRatio","_this4","Big","DP","emit","onSocketMessage","lastPrice","absoluteChange","minus","percentageChange","times","div","react_default","a","createElement","className","ref","Component","firebase","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","db","settings","timestampsInSnapshots","userId","provider","GoogleAuthProvider","maybeAuthAndGetUserId","Promise","resolve","onAuthStateChanged","user","uid","signInWithPopup","catch","error","alert","App","search","symbolsListActive","symbolsList","searchList","reorderCharts","r","map","el","collection","doc","get","data","symbols","set","merge","event","target","toUpperCase","filter","startsWith","some","update","FieldValue","arrayUnion","addSymbolToDb","dragResult","removedIndex","addedIndex","symbolsInNewOrder","removedChartSymbol","splice","getSymbolsListActive","getSymbolsList","type","placeholder","onChange","key","onMouseDown","tryToAddSymbolChart","dist","onDrop","src_Stock_0","Boolean","location","hostname","match","ReactDOM","render","src_App_0","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.9238cd0c.chunk.js","sourcesContent":["var canvasWidth, canvasHeight, coefTimeToCanvas, secondsInaDay = 6 * 60 * 60 + 30 * 60;\r\n\r\nfunction initVars(canvas) {\r\n  canvasWidth = canvas.width;\r\n  canvasHeight = canvas.height;\r\n  coefTimeToCanvas = canvasWidth / secondsInaDay;\r\n}\r\n\r\nfunction drawPreviousCloseLine(context, previousClose) {\r\n  // previousClose = canvasHeight / 2;\r\n  context.beginPath();\r\n  context.moveTo(0, canvasHeight - previousClose);\r\n  context.lineTo(canvasWidth, canvasHeight - previousClose);\r\n  context.lineWidth = 1;\r\n  context.strokeStyle = '#0000001a';\r\n  context.stroke();\r\n}\r\n\r\nexport function drawChart(canvas, context, prices, previousClose) {\r\n  initVars(canvas);\r\n\r\n  drawPreviousCloseLine(context, previousClose);\r\n  console.log('%c⧭', 'color: #1663c7', canvasWidth, canvasHeight, secondsInaDay);\r\n// previousClose = canvasHeight / 2;\r\n  // console.log('%c⧭', 'color: #a66037', prices);\r\n  // console.time(1)\r\n  for (const sign of ['positive', 'negative']) {\r\n    let lastData = {\r\n      index: null,\r\n      time: null\r\n    }\r\n    context.beginPath();\r\n    context.moveTo(0, canvasHeight - previousClose);\r\n    for (const { index, timeInSeconds, price } of prices[sign]) {\r\n      const lineOrMoveTo = (index - lastData.index > 1) ? 'moveTo' : 'lineTo'\r\n      // console.log('%c⧭', sign === 'positive' ? 'color: #16c774' : 'color: #c71f16', index, timeInSeconds, price, sign, lineOrMoveTo);\r\n      context[lineOrMoveTo](timeInSeconds * coefTimeToCanvas, canvasHeight - price);\r\n      lastData.time = timeInSeconds;\r\n      lastData.index = index;\r\n    }\r\n    context.lineWidth = 1;\r\n    context.strokeStyle = sign === 'positive'? 'green' : 'red';\r\n    context.stroke();\r\n    context.lineTo(lastData.time * coefTimeToCanvas, canvasHeight - previousClose);\r\n    fillChart(sign, context, previousClose);\r\n  }\r\n  // console.timeEnd(1)\r\n}\r\n\r\nfunction fillChart(sign, context, previousClose) {\r\n  // previousClose = canvasHeight / 2;\r\n  context.save();\r\n  context.clip();\r\n  if (sign === 'positive') {\r\n    context.fillStyle = '#ccebd6';\r\n    context.fillRect(0, 0, canvasWidth, canvasHeight - previousClose);\r\n  } else {\r\n    context.fillStyle = '#ffd6d8';\r\n    context.fillRect(0, canvasHeight - previousClose, canvasWidth, canvasHeight);\r\n  }\r\n  context.restore();\r\n}","export default function timeToSeconds(time) {\r\n  time = time.toString();\r\n  if (typeof time !== 'string' || !time.includes(':')) {\r\n    // console.log('%c⧭', 'color: #c71f16', time);\r\n    time = time - 5 * 3600 * 1000; // utc to est\r\n    time = new Date(+time).toISOString().split('T')[1].slice(0, -1);\r\n  }\r\n  let coef = 3600\r\n  let result = null\r\n  for (const number of time.split('.')[0].split(':')) {\r\n    result += number * coef;\r\n    coef = coef / 60;\r\n  }\r\n  return result;\r\n}","import io from 'socket.io-client';\r\nimport timeToSeconds from './timeToSeconds.js';\r\n\r\nexport const socket = io('https://ws-api.iextrading.com/1.0/last');\r\n\r\nconsole.log('%c⧭', 'color: #16a9c7', socket);\r\n// socket.on('message', message => {\r\n//   message = JSON.parse(message);\r\n//   const symbol = message.symbol;\r\n//   console.log(message);\r\n//   if (symbolsActiveData.hasOwnProperty(symbol)) {\r\n//     symbolsActiveData[symbol] = {\r\n//       price: message.price,\r\n//       time: timeToSeconds(message.time)\r\n//     };\r\n//   }\r\n//   console.log('%c⧭⧭⧭', 'color: #c716a1', symbolsActiveData);\r\n// })\r\nsocket.on('connect', () => {\r\n  console.log('%c%s', 'color: #c76f16', 'connect');\r\n})\r\n// socket.on('disconnect', () => console.log('Disconnected.'))\r\n\r\nexport const symbolsActiveData = {}\r\n\r\nexport function startGettingSymbolData(symbol) {\r\n  // symbolsActiveData[symbol] = {};\r\n  socket.emit('subscribe', symbol);\r\n  console.log('%c%s', 'color: #c716a1', symbol + ' subbed');\r\n}","import React, { Component } from 'react';\n// import logo from './logo.svg';\nimport './Stock.css';\nimport { drawPreviousCloseLine, drawChart } from './draw.js';\nimport timeToSeconds from './timeToSeconds.js';\nimport Big from 'big.js';\nimport { socket, startGettingSymbolData } from './Socket';\n\nclass Stock extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      prices: [],\n      pricesModifiedForCanvas: [],\n      counter: 0,\n      previousClose: null,\n      previousCloseModifiedForCanvas: null,\n      priceMin: null,\n      priceMax: null,\n      coefPricesToCanvas: null,\n      webSocketsMessagesCounter: 0\n    };\n    this.canvas = React.createRef();\n    this.getDataAndMakeChart = this.getDataAndMakeChart.bind(this);\n    this.makeChart = this.makeChart.bind(this);\n    this.draw = this.draw.bind(this);\n    this.setPreviousClose = this.setPreviousClose.bind(this);\n    this.modifyEverythingForCanvas = this.modifyEverythingForCanvas.bind(this);\n    this.getPricesMaxMinAndCanvasCoef = this.getPricesMaxMinAndCanvasCoef.bind(this);\n  }\n  async getDataAndMakeChart() {\n    const chartData = await fetch('https://api.iextrading.com/1.0/stock/' + this.props.symbol + '/chart/1d')\n      .then(response => response.json());\n    return this.makeChart(chartData);\n    // console.log('%c⧭', 'color: #c74b16', chartData);\n  }\n  // async updateChart() {\n  //   const newChartData = await fetch('https://api.iextrading.com/1.0/stock/' + this.props.symbol + '/chart/1d?chartLast=5')\n  //     .then(response => response.json());\n    \n  // }\n  async makeChart(chartDataDay) {\n    await this.setPreviousClose(chartDataDay);\n    this.getPricesMaxMinAndCanvasCoef(chartDataDay);\n    this.modifyEverythingForCanvas();\n    this.initResizeCanvas();\n    return this.draw();\n  }\n  async setPreviousClose(chartDataDay) {\n    const chartDataMonth = await fetch('https://api.iextrading.com/1.0/stock/' + this.props.symbol + '/chart/1m')\n      .then(response => response.json());\n    const dateToday = new Date(Date.now() - 864e5).toISOString().split('T')[0].replace(/-/g,'');\n    const chardDataDayReturnsYesterday = dateToday === chartDataDay[chartDataDay.length - 1].date;\n    const objToGetPreviousCloseFrom = chartDataMonth[chartDataMonth.length - (chardDataDayReturnsYesterday ? 2 : 1)];\n    const previousClose = objToGetPreviousCloseFrom.close;\n    // console.log('%c⧭', 'color: #c79816', `${this.props.symbol}, pC:${previousClose}`);\n    this.setState(state => ({...state, previousClose}));\n  }\n  getPricesMaxMinAndCanvasCoef(chartDataDay) {\n    const prices = [], simplePrices = [];\n    // let lastPrice = null;\n    // const lastLocalPriceTimeInSeconds = this.state.prices.legth ? this.state.prices[this.state.prices.length - 1].timeInSeconds : 0\n    for (const minuteData of chartDataDay) {\n      const price = minuteData.close || minuteData.marketClose;\n      if (price) {\n        prices.push({\n          price,\n          timeInSeconds: timeToSeconds(minuteData.minute)\n        });\n        simplePrices.push(price);\n      }\n      // lastPrice = price;\n      // console.log('%c⧭', 'color: #c71f16', timeToSeconds(minuteData.minute), lastLocalPricetimeInSeconds);\n    }\n    // console.log('%c⧭', 'color: #2516c7', prices);\n    this.setState(state => ({...state, prices}));\n    const priceMax = Math.max(...simplePrices, this.state.previousClose);\n    const priceMin = Math.min(...simplePrices, this.state.previousClose);\n    this.setState(state => ({...state, priceMax}));\n    this.setState(state => ({...state, priceMin}));\n    // console.log('%c⧭', 'color: #c7c116', ...simplePrices, this.state.previousClose);\n    const coefPricesToCanvas = 35 /*canvas height */ / (priceMax - priceMin);\n    this.setState(state => ({...state, coefPricesToCanvas}));\n  }\n  modifyEverythingForCanvas() {\n    this.setState(state => ({...state, previousCloseModifiedForCanvas: (state.previousClose - this.state.priceMin) * this.state.coefPricesToCanvas}));\n    // console.log('%c⧭', 'color: #b8ca10', this.state.previousCloseModifiedForCanvas);\n    const pricesModifiedForCanvas = {\n      positive: [],\n      negative: []\n    };\n    let lastData = {\n      sign: null,\n      time: null\n    }\n    let index = 0;\n    // this.setState(state => ({...state, previousClose: state.priceMin + (state.priceMax - state.priceMin) / 2}));\n    for (const priceObj of this.state.prices) {\n      const price = priceObj.price;\n      const timeInSeconds = this.modifyTimeForCanvas(priceObj.timeInSeconds);\n      const sign = price >= this.state.previousClose ? 'positive' : 'negative';\n      if (lastData.sign !== sign && lastData.sign !== null) {\n        for (const temp of [lastData.sign, sign]) {\n          pricesModifiedForCanvas[temp].push({\n            timeInSeconds: (timeInSeconds + lastData.time) / 2, // average time\n            price: this.state.previousCloseModifiedForCanvas,\n            index\n          });\n          // console.log('%c⧭', 'color: #c74b16', timeInSeconds, lastData.time, index);          \n          index++;\n        }\n      }\n      pricesModifiedForCanvas[sign].push({\n        timeInSeconds,\n        price: (price - this.state.priceMin) * this.state.coefPricesToCanvas,\n        index\n      });\n      lastData.sign = sign;\n      lastData.time = timeInSeconds;\n      index++;\n    }\n    this.setState(state => ({...state, pricesModifiedForCanvas}));\n    // console.log('%c', 'color: #86c716', this.state.pricesModifiedForCanvas);\n  }\n  draw() {\n    const canvas = this.canvas.current;\n    const context = canvas.getContext('2d');\n    context.clearRect(0, 0, canvas.width, canvas.height);\n    drawChart(canvas, context, this.state.pricesModifiedForCanvas, this.state.previousCloseModifiedForCanvas);\n    // fillChart(context, this.state.previousCloseModifiedForCanvas);\n  }\n  onSocketMessage() {\n    socket.on('message', message => {\n      message = JSON.parse(message);\n      if (message.symbol !== this.props.symbol) return;\n      // console.log(message);\n      this.mergeSocketDataToPrices(message);\n      this.draw();\n      // symbolsActiveData[symbol] = {\n      //   price: message.price,\n      //   time: timeToSeconds(message.time)\n      // };\n    })\n  }\n  mergeSocketDataToPrices(message) {\n    this.setState(state => ({...state, webSocketsMessagesCounter: state.webSocketsMessagesCounter + 1}));\n    const lastLocalPriceTime = this.state.prices[this.state.prices.length - 1].timeInSeconds;\n    const lastLocalPrice = this.state.prices[this.state.prices.length - 1].price;\n    const messageTime = timeToSeconds(message.time)\n    // console.log('%c⧭', 'color: #16c79e', lastLocalPriceTime, messageTime);\n    console.time(1)\n    if (messageTime < lastLocalPriceTime || this.state.webSocketsMessagesCounter < 2) {\n      console.timeEnd(1)\n      return\n    }\n    console.timeEnd(1)\n\n    // to this.state.prices:\n    // console.log('%c⧭1', 'color: #c7166f', this.state.prices);\n    const pricesNew = this.state.prices.concat([{\n      price: message.price,\n      timeInSeconds: messageTime\n    }])\n    this.setState(state => ({...state, prices: pricesNew}));\n    // console.log('%c⧭2', 'color: #c7166f', this.state.prices, this.state.pricesModifiedForCanvas);\n\n    // to this.state.priceMin/priceMax/coefPricesToCanvas:\n    this.setState(state => ({...state, priceMax: Math.max(state.priceMax, message.price)}));\n    this.setState(state => ({...state, priceMin: Math.min(state.priceMin, message.price)}));\n    this.setState(state => ({...state, coefPricesToCanvas: 35 /*canvas height */ / (state.priceMax - state.priceMin)}));\n\n    // to this.state.pricesModifiedForCanvas:\n    const pricesModifiedForCanvas = JSON.parse(JSON.stringify(this.state.pricesModifiedForCanvas));\n    const sign = message.price >= this.state.previousClose ? 'positive' : 'negative';\n    const lastSign = lastLocalPrice >= this.state.previousClose ? 'positive' : 'negative';\n    let index = this.state.pricesModifiedForCanvas[lastSign][this.state.pricesModifiedForCanvas[lastSign].length - 1].index + 1\n    if (lastSign !== sign) {\n      for (const temp of [lastSign, sign]) {\n        pricesModifiedForCanvas[temp].push({\n          timeInSeconds: this.modifyTimeForCanvas((messageTime + lastLocalPriceTime) / 2), // average time modified for canvas\n          price: this.state.previousCloseModifiedForCanvas,\n          index\n        });\n        index++;\n      }\n    }\n    pricesModifiedForCanvas[sign].push({\n      timeInSeconds: this.modifyTimeForCanvas(messageTime),\n      price: (message.price - this.state.priceMin) * this.state.coefPricesToCanvas,\n      index\n    });\n    this.setState(state => ({...state, pricesModifiedForCanvas}));\n    // console.log('%c', 'color: #86c716', this.state.pricesModifiedForCanvas);\n  }\n  modifyTimeForCanvas(timeInSeconds) {\n    return timeInSeconds - (9 * 60 * 60 + 30 * 60);\n  }\n  initResizeCanvas() {\n    const canvas = this.canvas.current;\n    const scale = window.devicePixelRatio;\n    console.log('%c⧭', 'color: #c7166f', this.props.symbol, canvas.height, scale);\n    canvas.height = canvas.height * scale;\n    console.log('%c⧭', 'color: #c7166f', this.props.symbol, canvas.height, scale);\n    canvas.width = canvas.width * scale;\n  }\n  componentDidMount() {\n    Big.DP = 2;\n    this.getDataAndMakeChart().then(() => {\n      startGettingSymbolData(this.props.symbol);\n      this.onSocketMessage();\n    })\n  }\n  render() {\n    if (!this.state.prices.length) return null;\n    const lastPrice = this.state.prices[this.state.prices.length - 1].price;\n    // console.log('%c⧭', 'color: #c7166f', lastPrice);\n    const absoluteChange = Big(lastPrice).minus(this.state.previousClose).toString();\n    const percentageChange = Big(lastPrice).times(100).div(this.state.previousClose).minus(100).toString();\n    // console.log('%c⧭', 'color: #c71f16', lastPrice.toString(), this.state.previousClose);\n    return (\n      <div className=\"chart\">\n        <div className=\"text\">\n          <p className=\"symbol\">{this.props.symbol}</p>\n          <p className=\"price\">{lastPrice}</p>\n          <p className={'change ' + (absoluteChange >= 0 ? 'positive' : 'negative')}>{absoluteChange} ({percentageChange}%)</p>\n        </div>\n        <canvas ref={this.canvas} width=\"100\" height=\"35\"></canvas>\n      </div>\n    );\n  }\n}\n\nexport default Stock;\n","import * as firebase from 'firebase';\r\n// import 'firebase/auth';\r\n// import 'firebase/database';\r\n\r\nvar config = {\r\n  apiKey: \"AIzaSyDVs10hAUStxGmb_TxSEIR7iW78NyqwVKE\",\r\n  authDomain: \"stock-app-b7556.firebaseapp.com\",\r\n  databaseURL: \"https://stock-app-b7556.firebaseio.com\",\r\n  projectId: \"stock-app-b7556\",\r\n  storageBucket: \"stock-app-b7556.appspot.com\",\r\n  messagingSenderId: \"174869200663\"\r\n};\r\n\r\nfirebase.initializeApp(config);\r\nvar db = firebase.firestore();\r\ndb.settings({timestampsInSnapshots: true});\r\nvar provider = new firebase.auth.GoogleAuthProvider();\r\nvar userId;\r\n\r\nexport function maybeAuthAndGetUserId() {\r\n  return new Promise((resolve) => {\r\n    firebase.auth().onAuthStateChanged(user => {\r\n      if (user) {\r\n        userId = user.uid;\r\n        resolve(user);\r\n      } else {\r\n        resolve(auth());\r\n      }\r\n    });\r\n  })\r\n}\r\n\r\nexport function signout() {\r\n  return firebase.auth().signOut().then(() => {\r\n  }).catch(function(error) {\r\n    console.log(error);\r\n    alert(error.message);\r\n  });\r\n}\r\n\r\nexport function auth() {\r\n  return firebase.auth().signInWithPopup(provider).then(result => {\r\n    userId = result.user.uid;\r\n  }).catch(error => {\r\n    console.log(error);\r\n    alert(error.message);\r\n  });\r\n}\r\n\r\nexport function getSymbolsFromDb() {\r\n  return db.collection(\"users\").doc(userId).get().then(doc => {\r\n    const data = doc.data();\r\n    if (data) {\r\n      return data.symbols;\r\n    } else {\r\n      return db.collection(\"users\").doc(userId).set({\r\n        symbols: []\r\n      }, { merge: true }).then(() => ([]));\r\n    }\r\n  });\r\n}\r\n\r\nexport function reorderSymbolsInDb(symbolsInNewOrder) {\r\n  return db.collection(\"users\").doc(userId).update({\r\n    symbols: symbolsInNewOrder\r\n  });\r\n}\r\n\r\nexport function addSymbolToDb(symbol) {\r\n  return db.collection(\"users\").doc(userId).update({\r\n    symbols: firebase.firestore.FieldValue.arrayUnion(symbol)\r\n  });\r\n}\r\n\r\nexport function deleteSymbolFromDb(symbol) {\r\n  return db.collection(\"users\").doc(userId).update({\r\n    symbols: firebase.firestore.FieldValue.arrayRemove(symbol)\r\n  });\r\n}","import React, { Component } from 'react';\n// import logo from './logo.svg';\nimport Stock from './Stock';\nimport './App.css';\nimport { maybeAuthAndGetUserId, getSymbolsFromDb, addSymbolToDb, deleteSymbolFromDb, reorderSymbolsInDb } from './firebase';\nimport { Container, Draggable } from 'react-smooth-dnd';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      search: 'SNAP',\n      symbolsListActive: [],\n      symbolsList: [],\n      searchList: []\n    };\n    this.search = this.search.bind(this);\n    this.reorderCharts = this.reorderCharts.bind(this);\n  }\n  handleClick() {\n    console.log(this.state.counter);\n    this.setState(state => ({ counter: state.counter + 1 }));\n  }\n  getSymbolsList() {\n    return fetch('https://api.iextrading.com/1.0/ref-data/symbols?filter=symbol')\n      .then(response => response.json())\n      .then(r => {\n        this.setState(state => ({...state, symbolsList: r.map(el => el.symbol)}));\n        this.setState(state => ({...state, searchList: state.symbolsList}));\n      })\n  }\n  async getSymbolsListActive() {\n    const symbolsListActive = await getSymbolsFromDb();\n    console.log('%c⧭', 'color: #2516c7', symbolsListActive);\n    this.setState(state => ({...state, symbolsListActive}));\n    console.log('%c⧭', 'color: #c76f16', this.state.symbolsListActive);\n  }\n  search(event) {\n    const search = (event.target ? event.target.value : event).toUpperCase();\n    this.setState(state => ({...state, search}));\n    const searchList = this.state.symbolsList.filter(el => el.startsWith(search)) || [];\n    this.setState(state => ({...state, searchList: searchList}));\n  }\n  tryToAddSymbolChart(symbol) {\n    if (!this.state.symbolsListActive.some(el => el === symbol)) {\n      this.setState(state => ({...state, symbolsListActive: state.symbolsListActive.concat([symbol])}));\n      return addSymbolToDb(symbol);\n    }\n  }\n  reorderCharts(dragResult) {\n    console.log('%c⧭', 'color: #6c16c7', dragResult);\n    console.log('%c⧭', 'color: #c76f16', this.state.symbolsListActive);\n    const { removedIndex, addedIndex } = dragResult;\n    if (removedIndex === addedIndex) return\n    const symbolsListActive = this.state.symbolsListActive.slice();\n    const removedChartSymbol = symbolsListActive.splice(removedIndex, 1)[0]\n    symbolsListActive.splice(addedIndex, 0, removedChartSymbol);\n    console.log('%c⧭', 'color: #1663c7', symbolsListActive);\n    this.setState(state => ({...state, symbolsListActive}));\n    reorderSymbolsInDb(symbolsListActive);\n  }\n  componentDidMount() {\n    maybeAuthAndGetUserId().then(() => this.getSymbolsListActive());\n    this.getSymbolsList().then(() => this.search(this.state.search));\n  }\n  render() {\n    return (\n      <div className=\"App\">\n        <p>{window.devicePixelRatio}</p>\n        <header className=\"App-header\">\n          <input className=\"search-bar\" type=\"text\" placeholder=\"Search\" value={this.state.search} onChange={this.search}/>\n          <ul className=\"search-options\">\n            {this.state.searchList.map(symbol => <li key={symbol}><button onMouseDown={() => this.tryToAddSymbolChart(symbol)}>{symbol}</button></li>).slice(0, 28)}\n          </ul>\n        </header>\n        <div className=\"charts-container\">\n          <Container onDrop={this.reorderCharts}>\n            {this.state.symbolsListActive.map(symbol => (\n              <Draggable key={symbol}>\n                <Stock symbol={symbol}/>\n              </Draggable>\n            ))}\n          </Container>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}